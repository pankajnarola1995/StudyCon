<% include partials/TopHeader.ejs %>

<% include partials/header.ejs %>
<style>
    #abc {
        width: 100%;
        height: 100%;
        opacity: .95;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background-color: #313131;
        overflow: auto;
        align-content: center;
    }

    #abcImage {
        width: 100%;
        height: 100%;
        opacity: .95;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background-color: #313131;
        overflow: auto;
        align-content: center;
    }
    img #close {
        position: absolute;
        right: -14px;
        top: -14px;
        cursor: pointer
    }

    div#popupContact {
        position: absolute;
        left: 50%;
        top: 17%;
        margin-left: -202px;
        font-family: 'Raleway', sans-serif
    }

    div#popupContactImage {
        position: absolute;
        left: 50%;
        top: 17%;
        margin-left: -202px;
        font-family: 'Raleway', sans-serif
    }
    p {
        margin-top: 30px
    }

    h2 {
        background-color: #FEFFED;
        padding: 20px 35px;
        margin: -10px -50px;
        text-align: center;
        border-radius: 10px 10px 0 0
    }

    hr {
        margin: 10px -50px;
        border: 0;
        border-top: 1px solid #ccc
    }

    span {
        color: red;
        font-weight: 700
    }

</style>

<!--Add Language Details -->
<div class="span9">
    <div class="content">

        <div class="module">
            <div class="module-head">
                <h3>Language Detail Add</h3>
            </div>
            <div class="module-body">


                <form class="form-horizontal row-fluid" method="post"
                      action="/Admin/AdminLanguage/AdminLanguageAddData"
                      enctype="multipart/form-data">

                    <div class="control-group">
                        <label class="control-label"><b>Language Name</b></label>
                        <div class="controls">

                            <input type="text" name="Language_name" id="Language_name" placeholder="Type Language name"
                                   class="span8" required>

                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label"><b>Language Flag</b></label>
                        <div class="controls">
                            <input type="file" id="flag_image" name="flage_image" class="span8" required>
                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Requirenment</b></label>
                        <div class="controls">
                            <textarea class="span8" rows="5" name="requirenment" id="requirenment"
                                      placeholder="Enter requirenment" required></textarea>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Details</b></label>
                        <div class="controls">
                            <textarea class="span8" rows="5" name="detail" id="detail"
                                      placeholder="Enter detail" required></textarea>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Important Links</b></label>
                        <div class="controls">
                            <textarea class="span8" rows="5" name="important_link" id="important_link"
                                      placeholder="Enter important_link" required></textarea>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Images</b></label>
                        <div class="controls">
                            <input type="file" id="images" name="images" class="span8" multiple required min="2">
                        </div>
                    </div>


                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn " name="add_seed" id="add_seed">Submit Form</button>
                        </div>
                    </div>

                </form>
                <br/>
                <br/>
                <br/>
                <br/>

                <table cellpadding="0" cellspacing="0" border="0"
                       class="datatable-1 table table-bordered table-striped	 display" width="100%"
                       style="font-size:13px;">
                    <thead>
                    <tr>

                        <th>Delete</th>
                        <th>Update</th>
                        <th>Update Image</th>
                        <th>Flag</th>
                        <th>Language Name</th>
                        <th>Requirenment</th>
                        <th>Details</th>
                        <th>Important Links</th>


                    </tr>
                    </thead>
                    <tbody>

                    <% for(let i = 0; i < Language.length; i++){ %>
                    <tr class="odd gradeX">
                        <td><a onclick="deleteLanguage('<%= Language[i]._id %>')"><img src="/images/delete.png"
                                                                                             style="height: 25px;width: 25px"/></a>
                        </td>


                        <!-- Display Popup Button -->


                        <td><a id="popup" onclick="div_show('<%= Language[i]._id %>')"> <img src="/images/update.png"
                                                                                                id="myPopup"
                                                                                                style="height: 25px;width: 25px"/></a>
                        </td>
                        <td>
                            <input type="hidden" value="<%= Language[i]._id %>" name="lid">
                            <a id="popupImage" onclick="div_show1('<%= Language[i]._id %>')"><img
                                        src="/images/update.png"

                                        style="height: 25px;width: 25px"/></a>
                        </td>
                        <td><img height="75" width="75"
                                 src="/images/Language_Flag/<%= Language[i].flage_image %>"/></td>
                        <td><%= Language[i].Language_name %></td>
                        <td><%= Language[i].requirenment %></td>
                        <td><%= Language[i].detail %></td>
                        <td><%= Language[i].important_link %></td>

                    </tr>
                    <% } %>

                    </tbody>
                    <tfoot>
                    <tr>

                        <th>Delete</th>
                        <th>Update</th>
                        <th>Update Image</th>
                        <th>Flag</th>
                        <th>Language Name</th>
                        <th>Requirenment</th>
                        <th>Details</th>
                        <th>Important Links</th>

                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>


        <br/>

    </div><!--/.content-->
</div><!--/.span9-->


<!--Update Language Details  -->
<div id="body" style="overflow:hidden;align-items:center;">

    <div id="abc">
        <!-- Popup Div Starts Here -->
        <div id="popupContact">
            <!-- Contact Us Form -->

            <h1 style="
        background-color:#FEFFED;
        padding:20px 35px;
        margin:-10px -50px;
        text-align:center;
        border-radius:10px 10px 0 0;
        float: right">
                Update Language Details
                <img id="close" src="/images/close.png" onclick="div_hide() " style="float: right;margin-left: 50px">
            </h1>
            <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                  action="/Admin/AdminLanguage/AdminLanguageUpdateData" style="
                                                                                      max-width:100%;
                                                                                      min-width:100%;
                                                                                      padding:10px 50px;
                                                                                      border:2px solid gray;
                                                                                      border-radius:10px;
                                                                                      font-family:raleway;
                                                                                      background-color:#fff;

      ">
                <br/><br/><br/><br/>

                <div class="control-group">
                    <label class="control-label"><b>Language Name</b></label>
                    <div class="controls">
                        <textarea name="Language_name" id="getResponseLanguage_name" placeholder="Type Language name"
                                  class="span8" style="resize: none"></textarea>
                        <textarea name="id" id="getResponseid" placeholder="Type Language name"
                                  class="span8" style="resize: none;display: none"></textarea>


                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Language Flag</b></label>
                    <div class="controls">
                        <input type="file" id="flage_image" name="flage_image" class="span8">
                        <pre id="ima" style="height:100%;width: 75px"></pre>
                    </div>
                </div>


                <div class="control-group">
                    <label class="control-label"><b>Requirenment</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="requirenment" id="getResponserequirenment"
                                  placeholder="Enter requirenment"></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Details</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="detail" id="getResponsedetail"
                                  placeholder="Enter detail"></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Important Links</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="important_link" id="getResponseimportant_link"
                                  placeholder="Enter important_link"></textarea>
                    </div>
                </div>


                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn" name="add_seed" id="add_seed">Submit Form</button>
                    </div>
                </div>

            </form>
        </div>
        <!-- Popup Div Ends Here -->
    </div>
</div>

<!--Update Language Image Details  -->
<div id="body" style="overflow:hidden;align-items:center;">

    <div id="abcImage">
        <!-- Popup Div Starts Here -->
        <div id="popupContactImage">
            <!-- Contact Us Form -->

            <h1 style="
        background-color:#FEFFED;
        padding:20px 35px;
        margin:-10px -50px;
        text-align:center;
        border-radius:10px 10px 0 0;
        float: right">
                Update Language Details
                <img id="close" src="/images/close.png" onclick="div_hideImage() "
                     style="float: right;margin-left: 50px">
            </h1>
            <div style="
                                                                                      max-width:100%;
                                                                                      min-width:100%;
                                                                                      padding:10px 50px;
                                                                                      border:2px solid gray;
                                                                                      border-radius:10px;
                                                                                      font-family:raleway;
                                                                                      background-color:#fff;

      ">
                <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                      action="/Admin/AdminLanguage/AdminLanguageUpdateImages">
                    <br/><br/><br/><br/>

                    <div class="control-group">
                        <label class="control-label"><b>Images</b></label>
                        <div class="controls">
                            <input type="file" id="images" name="images" class="span8" multiple required>
                        </div>
                    </div>
                    <textarea id="lidForNewImages" name="lid1" style="visibility: hidden"></textarea>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn" name="add_seed" id="add_seed">Submit Form</button>
                        </div>
                    </div>

                </form>
                <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                      action="/Admin/AdminLanguage/AdminLanguageDeleteAllImages" style="margin: 10%">
                    <textarea id="lid" name="lid" style="visibility: hidden"></textarea>
                    <button type="submit" class="btn" name="add_seed" id="add_seed" style="color: #0e0e0e;text-decoration: dotted">Delete All Images</button>
                </form>
                <div id="SearchResult" style="background: #fff;margin-top: 10%;align-content: center"></div>

            </div>
        </div>
        <!-- Popup Div Ends Here -->
    </div>
</div>

<script src="javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>

<script>
    function deleteLanguage(lid) {
        //console.log("de");
        if (confirm("Are you sure you want to delete customer ")) {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/Admin/AdminLanguage/AdminLanguageDeleteData',
                data: {"lid": lid},
                dataType: 'json',
                success: function (result) {
                    if (result) {
                        location.reload();

                    }
                }
            });
        }
        else {
            return false;
        }
    }

    // When the user clicks on div, open the popup

    function div_show(lid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminLanguage/AdminLanguageUpdateGetData',
            data: {"lid": lid},
            dataType: 'json',
        }).done(function (data) {
            $('#getResponseid').html(data.Language[0]._id);
            $('#getResponseLanguage_name').html(data.Language[0].Language_name);
            $('#getResponserequirenment').html(data.Language[0].requirenment);
            $('#getResponsedetail').html(data.Language[0].detail);
            $('#getResponseimportant_link').html(data.Language[0].important_link);
            $('#ima').html('<img height="75" width="75" src="/images/Language_Flag/' + data.Language[0].flage_image + '">');
        });
        document.getElementById('abc').style.display = "block";
        //console.log(data);

    }

    //Function to Hide Popup
    function div_hide() {
        document.getElementById('abc').style.display = "none";
    }

    function div_show1(lid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminLanguage/AdminLanguageUpdateGetImages',
            data: {"lid": lid},
            dataType: 'json',
        }).done(function (data) {
            let i, html, a;
            html = '<div>';
            for (i = 0; i < data.length; i++) {
                a = data[i]._id;

                html += '<form method="post"   action="/Admin/AdminLanguage/AdminLanguageDeleteImage" ><input name="Iid" value="' + data[i]._id + '" hidden /><img height="300" width="300" src="/images/Language/' + data[i].images_name + '" /><button class="btn" type="submit" style="align:center" >DELETE </button></form>' + ' \n' +
                    '                    </br></br>';
            }
            html += '<div>';

            $("#SearchResult").html(html);
            $("#lid").html(lid);
            $("#lidForNewImages").html(lid);
            // $('#ima').html('<img height="75" width="75" src="/images/Language_Flag/' + data.Language[0].flage_image + '">');
        });
        document.getElementById('abcImage').style.display = "block";
        //console.log(data);

    }

    //Function to Hide Popup
    function div_hideImage() {
        document.getElementById('abcImage').style.display = "none";
    }

    function deleteImages(Iid) {
        // console.log("de");
        if (confirm("Are you sure you want to delete customer ")) {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/Admin/AdminLanguage/AdminLanguageDeleteImage',
                data: {"Iid": Iid},
                dataType: 'json',
                success: function (result) {
                    if (result) {
                        location.reload();

                    }
                }
            });
        }
        else {

        }
    }

</script>

<% include partials/footer.ejs %>
