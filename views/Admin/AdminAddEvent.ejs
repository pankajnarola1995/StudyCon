
<% include partials/TopHeader.ejs %>
<% include partials/header.ejs %>

<style>
    #abc {
        width: 100%;
        height: 100%;
        opacity: .95;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background-color: #313131;
        overflow: auto;
        align-content: center;
    }

    #abcImage {
        width: 100%;
        height: 100%;
        opacity: .95;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background-color: #313131;
        overflow: auto;
        align-content: center;
    }

    img #close {
        position: absolute;
        right: -14px;
        top: -14px;
        cursor: pointer
    }

    div#popupContact {
        position: absolute;
        left: 50%;
        top: 17%;
        margin-left: -202px;
        font-family: 'Raleway', sans-serif
    }

    div#popupContactImage {
        position: absolute;
        left: 50%;
        top: 17%;
        margin-left: -202px;
        font-family: 'Raleway', sans-serif
    }

    p {
        margin-top: 30px
    }

    h2 {
        background-color: #FEFFED;
        padding: 20px 35px;
        margin: -10px -50px;
        text-align: center;
        border-radius: 10px 10px 0 0
    }

    hr {
        margin: 10px -50px;
        border: 0;
        border-top: 1px soeid #ccc
    }

    span {
        color: red;
        font-weight: 700
    }

</style>

<div class="span9">
    <div class="content">

        <div class="module">
            <div class="module-head">
                <h3>Add Event</h3>
            </div>
            <div class="module-body">


                <form class="form-horizontal row-fluid" method="post"
                      action="/Admin/AdminAddEvent/AdminAddEventAddData" enctype="multipart/form-data">

                    <div class="control-group">
                        <label class="control-label"><b>Event Name</b></label>
                        <div class="controls">
                            <input type="text" name="event_name" id="event_name" placeholder="Type event name"
                                   class="span8" required>
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label"><b>Event Description</b></label>
                        <div class="controls">
                            <input type="text" id="event_description" name="event_description" class="span8" required />
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>
                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Event Type</b></label>
                        <div class="controls">
                            <input type="text" id="event_type" name="event_type" class="span8" required />
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>

                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Event Start Date</b></label>
                        <div class="controls">
                            <input type="text" id="event_start" name="event_start" class="span8" required />

                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Event End Date</b></label>
                        <div class="controls">
                            <input type="text" id="event_end" name="event_end" class="span8" required />

                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Event Details</b></label>
                        <div class="controls">
                            <textarea class="span8" rows="5" name="event_details"  id="details"
                                      placeholder="Enter details" required ></textarea>
                              </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Images</b></label>
                        <div class="controls">
                            <input type="file"  name="images" id="images" class="span8" multiple required>
                            <span class="help-inline" id="msgseed_images" style="color:#F00;position:absolute"></span>
                        </div>
                    </div>


                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn" name="add_seed" id="add_seed">Add Event</button>
                        </div>
                    </div>

                </form>
                <br/>
                <br/>
                <br/>
                <br/>
                <div id="BannerDataTable">
                    <table cellpadding="0" cellspacing="0" border="0"
                           class="datatable-1 table table-bordered table-striped	 display" width="100%"
                           style="font-size:13px;">
                        <thead>
                        <tr>

                            <th>Delete</th>
                            <th>Update</th>
                            <th>Update Image</th>
                            <th>Event Name</th>
                            <th>Event Start</th>
                            <th>Event End</th>
                            <th>Description</th>
                            <th>Event type</th>
                            <th>Details</th>


                        </tr>
                        </thead>
                        <tbody>

                        <% for(var i = 0; i < AddEvent.length; i++){ %>
                        <tr class="odd gradeX">
                            <td><a onclick="deleteAddEvent('<%= AddEvent[i]._id %>')"><img src="/images/delete.png"
                                                                                           style="height: 25px;width: 25px"/></a>
                            </td>


                            <!-- Display Popup Button -->


                            <td><a id="popup" onclick="div_show('<%= AddEvent[i]._id %>')"> <img
                                            src="/images/update.png"
                                            id="myPopup"
                                            style="height: 25px;width: 25px"/></a>
                            </td>
                            <td>
                                <input type="hidden" value="<%= AddEvent[i]._id %>" name="eid">
                                <a id="popupImage" onclick="div_show1('<%= AddEvent[i]._id %>')"><img
                                            src="/images/update.png"

                                            style="height: 25px;width: 25px"/></a>
                            </td>

                            <td><%= AddEvent[i].event_name %></td>
                            <td><%= AddEvent[i].event_start %></td>
                            <td><%= AddEvent[i].event_end %></td>
                            <td><%= AddEvent[i].event_description %></td>
                            <td><%= AddEvent[i].event_type %></td>
                            <td><%= AddEvent[i].event_details %></td>

                        </tr>
                        <% } %>

                        </tbody>
                        <tfoot>
                        <tr>


                            <th>Delete</th>
                            <th>Update</th>
                            <th>Update Image</th>
                            <th>Event Name</th>
                            <th>Event Start</th>
                            <th>Event End</th>
                            <th>Description</th>
                            <th>Event type</th>
                            <th>Details</th>

                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>


        <br/>

    </div><!--/.content-->
</div><!--/.span9-->


<!--Update AddEvent Details  -->
<div id="body" style="overflow:hidden;align-items:center;">

    <div id="abc">
        <!-- Popup Div Starts Here -->
        <div id="popupContact">
            <!-- Contact Us Form -->

            <h1 style="
        background-color:#FEFFED;
        padding:20px 35px;
        margin:-10px -50px;
        text-align:center;
        border-radius:10px 10px 0 0;
        float: right">
                Update AddEvent Details
                <img id="close" src="/images/close.png" onclick="div_hide() " style="float: right;margin-left: 50px">
            </h1>
            <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                  action="/Admin/AdminAddEvent/AdminAddEventUpdateData" style="
                                                                                      max-width:100%;
                                                                                      min-width:100%;
                                                                                      padding:10px 50px;
                                                                                      border:2px soeid gray;
                                                                                      border-radius:10px;
                                                                                      font-family:raleway;
                                                                                      background-color:#fff;

      ">
                <br/><br/><br/><br/>

                <div class="control-group">
                    <label class="control-label"><b>Event Name</b></label>
                    <div class="controls">
                        <textarea name="event_name" id="getResponseevent_name" placeholder="Type AddEvent name"
                                  class="span8" style="resize: none" required ></textarea>
                        <textarea name="eid" id="getResponseid" placeholder="Type AddEvent name"
                                  class="span8" style="resize: none;display: none"></textarea>


                    </div>
                </div>



                <div class="control-group">
                    <label class="control-label"><b>Event Description</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="event_description" id="getResponseevent_description"
                                  placeholder="Enter requirenment" required ></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Event Type</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="event_type" id="getResponseevent_type"
                                  placeholder="Enter detail" required></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Event Start Date</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="event_start" id="getResponseevent_start"
                                  placeholder="Enter important_link" required></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Event End Date</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="event_end" id="getResponseevent_end"
                                  placeholder="Enter important_link" required></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label"><b>Event Details</b></label>
                    <div class="controls">
                        <textarea class="span8" rows="5" name="event_details" id="getResponseevent_details"
                                  placeholder="Enter important_link" required></textarea>
                    </div>
                </div>

                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn" name="add_seed" id="add_seed">Submit Form</button>
                    </div>
                </div>

            </form>

        </div>
        <!-- Popup Div Ends Here -->
    </div>
</div>

<!--Update AddEvent Image Details  -->
<div id="body" style="overflow:hidden;align-items:center;">

    <div id="abcImage">
        <!-- Popup Div Starts Here -->
        <div id="popupContactImage">
            <!-- Contact Us Form -->

            <h1 style="
        background-color:#FEFFED;
        padding:20px 35px;
        margin:-10px -50px;
        text-align:center;
        border-radius:10px 10px 0 0;
        float: right">
                Update AddEvent Details
                <img id="close" src="/images/close.png" onclick="div_hideImage() "
                     style="float: right;margin-left: 50px">
            </h1>
            <div style="
                                                                                      max-width:100%;
                                                                                      min-width:100%;
                                                                                      padding:10px 50px;
                                                                                      border:2px soeid gray;
                                                                                      border-radius:10px;
                                                                                      font-family:raleway;
                                                                                      background-color:#fff;

      ">
                <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                      action="/Admin/AdminAddEvent/AdminAddEventUpdateImages">
                    <br/><br/><br/><br/>

                    <div class="control-group">
                        <label class="control-label"><b>Images</b></label>
                        <div class="controls">
                            <input type="file" id="images" name="images" class="span8" multiple required>
                        </div>
                    </div>
                    <textarea id="eidForNewImages" name="eid1" style="visibility: hidden"></textarea>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn" name="add_seed" id="add_seed">Submit Form</button>
                        </div>
                    </div>

                </form>
                <form class="form-horizontal row-fluid" method="post" enctype="multipart/form-data"
                      action="/Admin/AdminAddEvent/AdminAddEventDeleteAllImages" style="margin: 10%">
                    <textarea id="eid" name="eid" style="visibility: hidden"></textarea>
                    <button type="submit" class="btn" name="add_seed" id="add_seed"
                            style="color: #0e0e0e;text-decoration: dotted">Delete All Images
                    </button>
                </form>
                <div id="SearchResult" style="background: #fff;margin-top: 10%;align-content: center"></div>

            </div>
        </div>
        <!-- Popup Div Ends Here -->
    </div>
</div>

<script src="javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>

<script>
    function deleteAddEvent(eid) {
        //console.log("de");
        if (confirm("Are you sure you want to delete event entry ")) {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddEventDeleteData',
                data: {"eid": eid},
                dataType: 'json',
                success: function (result) {
                    if (result) {
                        $('#BannerDataTable').load("http://localhost:3000/Admin/AdminAddEvent #BannerDataTable");

                    }
                }
            });
        }
        else {
            return false;
        }
    }

    // When the user clicks on div, open the popup

    function div_show(eid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddEventUpdateGetData',
            data: {"eid": eid},
            dataType: 'json',
        }).done(function (data) {
            $('#getResponseid').html(data.AddEvent[0]._id);
            $('#getResponseevent_name').html(data.AddEvent[0].event_name);
            $('#getResponseevent_start').html(data.AddEvent[0].event_start);
            $('#getResponseevent_end').html(data.AddEvent[0].event_end);
            $('#getResponseevent_description').html(data.AddEvent[0].event_description);
            $('#getResponseevent_type').html(data.AddEvent[0].event_type);
            $('#getResponseevent_details').html(data.AddEvent[0].event_details);

        });
        document.getElementById('abc').style.display = "block";
        //console.log(data);

    }


    function div_show1(eid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddEventUpdateGetImages',
            data: {"eid": eid},
            dataType: 'json',
        }).done(function (data) {
            let i, html, a;
            html = '<div>';
            for (i = 0; i < data.length; i++) {
                a = data[i]._id;

                html += '<form method="post"   action="/Admin/AdminAddEvent/AdminAddEventDeleteImage" ><input name="Iid" value="' + data[i]._id + '" hidden /><img height="300" width="300" src="/images/AddEvent/' + data[i].images_name + '" /><button class="btn" type="submit" style="align:center" >DELETE </button></form>' + ' \n' +
                    '                    </br></br>';
            }
            html += '<div>';

            $("#SearchResult").html(html);
            $("#eid").html(eid);
            $("#eidForNewImages").html(eid);
            // $('#ima').html('<img height="75" width="75" src="/images/AddEvent_Flag/' + data.AddEvent[0].flage_image + '">');
        });
        document.getElementById('abcImage').style.display = "block";
        //console.log(data);

    }
    //Function to Hide Popup
    function div_hide() {
        document.getElementById('abc').style.display = "none";
    }

    function div_hideImage() {
        document.getElementById('abcImage').style.display = "none";
    }
</script>


<% include partials/footer.ejs %>
