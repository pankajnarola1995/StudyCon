
<% include partials/TopHeader.ejs %>

<% include partials/header.ejs %>
<div class="span9">
    <div class="content">

        <div class="module">
            <div class="module-head">
                <h3>Add Event</h3>
            </div>
            <div class="module-body">


                <form class="form-horizontal row-fluid" method="post"
                      action="/Admin/AdminAddEvent/AdminAddEventAddData">

                    <div class="control-group">
                        <label class="control-label"><b>Event Name</b></label>
                        <div class="controls">
                            <input type="text" name="event_name" id="event_name" placeholder="Type event name"
                                   class="span8">
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label"><b>Event Description</b></label>
                        <div class="controls">
                            <input type="text" id="event_description" name="event_description" class="span8">
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>
                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Event Type</b></label>
                        <div class="controls">
                            <input type="text" id="event_type" name="event_type" class="span8">
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>

                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Event Start Date</b></label>
                        <div class="controls">
                            <input type="text" id="event_start" name="event_start" class="span8">
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>

                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><b>Event End Date</b></label>
                        <div class="controls">
                            <input type="text" id="event_end" name="event_end" class="span8">
                            <span class="help-inline" id="msgseed_detail_name"
                                  style="color:#F00;position:absolute"></span>

                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Event Details</b></label>
                        <div class="controls">
                            <textarea class="span8" rows="5" name="details" id="details"
                                      placeholder="Enter details"></textarea>
                            <span class="help-inline" id="msgdescription1" style="color:#F00;position:absolute"></span>
                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label"><b>Images</b></label>
                        <div class="controls">
                            <input type="file" id="image" name="image[]" class="span8" multiple>
                            <span class="help-inline" id="msgseed_images" style="color:#F00;position:absolute"></span>
                        </div>
                    </div>


                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn" name="add_seed" id="add_seed">Add Event</button>
                        </div>
                    </div>

                </form>
                <br/>
                <br/>
                <br/>
                <br/>
                <div id="BannerDataTable">
                    <table cellpadding="0" cellspacing="0" border="0"
                           class="datatable-1 table table-bordered table-striped	 display" width="100%"
                           style="font-size:13px;">
                        <thead>
                        <tr>

                            <th>Delete</th>
                            <th>Update</th>
                            <th>Event Name</th>
                            <th>Event Start</th>
                            <th>Event End</th>
                            <th>Description</th>
                            <th>Event type</th>
                            <th>Details</th>


                        </tr>
                        </thead>
                        <tbody>

                        <% for(var i = 0; i < AddEvent.length; i++){ %>
                        <tr class="odd gradeX">
                            <td><a onclick="deleteAddEvent('<%= AddEvent[i]._id %>')"><img src="/images/delete.png"
                                                                                           style="height: 25px;width: 25px"/></a>
                            </td>
                            <td><a id="popup" onclick="div_show('<%= AddEvent[i]._id %>')"> <img
                                            src="/images/update.png"
                                            id="myPopup"
                                            style="height: 25px;width: 25px"/></a>
                            </td>


                            <td><%= AddEvent[i].event_name %></td>
                            <td><%= AddEvent[i].event_description %></td>
                            <td><%= AddEvent[i].event_type %></td>
                            <td><%= AddEvent[i].event_start %></td>
                            <td><%= AddEvent[i].event_end %></td>
                            <td><%= AddEvent[i].event_details %></td>

                        </tr>
                        <% } %>

                        </tbody>
                        <tfoot>
                        <tr>

                            <th>Delete</th>
                            <th>Update</th>
                            <th>Event Name</th>
                            <th>Event Start</th>
                            <th>Event End</th>
                            <th>Description</th>
                            <th>Event Type</th>
                            <th>Details</th>

                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>


        <br/>

    </div><!--/.content-->
</div><!--/.span9-->


<script src="javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
<script>
    function deleteAddEvent(eid) {
        //console.log("de");
        if (confirm("Are you sure you want to delete event entry ")) {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddEventDeleteData',
                data: {"eid": eid},
                dataType: 'json',
                success: function (result) {
                    if (result) {
                        $('#BannerDataTable').load("http://localhost:3000/Admin/AdminAddEvent #BannerDataTable");

                    }
                }
            });
        }
        else {
            return false;
        }
    }

    // When the user clicks on div, open the popup

    function div_show(eid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddEventUpdateGetData',
            data: {"eid": eid},
            dataType: 'json',
        }).done(function (data) {
            $('#getResponseid').html(data.AdminAddEvent[0]._id);
            $('#getResponseevent_name').html(data.AdminAddEvent[0].event_name);
            $('#getResponseevent_start').html(data.AdminAddEvent[0].event_start);
            $('#getResponseevent_end').html(data.AdminAddEvent[0].event_end);
            $('#getResponseevent_description').html(data.AdminAddEvent[0].event_description);
            $('#getResponseevent_type').html(data.AdminAddEvent[0].event_type);
            $('#getResponseevent_details').html(data.AdminAddEvent[0].event_details);

        });
        document.getElementById('abc').style.display = "block";
        //console.log(data);

    }

    function div_showimages(eid) {
        $.ajax({
            type: 'POST',
            url: 'http://localhost:3000/Admin/AdminAddEvent/AdminAddeventUpdateGetImages',
            data: {"eid": eid},
            dataType: 'json',
        }).done(function (data) {

            // $('#getImages').html.JSON.stringify(data);
            for (var i = 0; i < Image.length; i++) {

                //console.log(data.Image.length());
            }

        });

        document.getElementById('abcimage').style.display = "block";

    }

    //Function to Hide Popup
    function div_hide() {
        document.getElementById('abc').style.display = "none";
    }

    function div_hideimage() {
        document.getElementById('abcimage').style.display = "none";
    }
</script>


<% include partials/footer.ejs %>
