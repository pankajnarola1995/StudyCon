<head>
    <title>StudyCon</title>
    <link href="stylesheets/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="stylesheets/animate.min.css" rel="stylesheet" type="text/css">
    <link href="fontawesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="stylesheets/style.css" rel="stylesheet" type="text/css">
    <link href="fontawesome/css/style.css" rel="stylesheet" type="text/css">
    <script src="http://code.jquery.com/jquery-3.0.0.slim.min.js"></script>

    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>

    <script src="javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/stylesheets/chatstyle.css">
    <link rel="stylesheet" type="text/css" href="fontawesome\css\style.css">
    <script src="http://code.jquery.com/jquery-3.0.0.slim.min.js"></script>
    <style>

        .dropbtn {
            background-color: #4CAF50;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        .dropdown {
            margin-top: 3%;
            margin-bottom: 3%;
            margin-left: 15px;
            position: relative;
            display: inline-block;

        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #3e8e41;
        }


    </style>
    <style>
        #abc {
            width: 100%;
            height: 100%;
            opacity: .95;
            top: 0;
            left: 0;
            display: none;
            position: fixed;
            background-color: #313131;
            overflow: auto;
            align-content: center;
        }

        div#popupContact {
            position: absolute;
            left: 50%;
            top: 17%;
            margin-left: -202px;
            font-family: 'Raleway', sans-serif
        }

    </style>
    <style>
        * {
            box-sizing: border-box
        }

        body {
            font-family: Verdana, sans-serif;
        }

        .mySlides {
            display: none
        }

        /* Slideshow container */
        .slideshow-container {
            max-width: 1000px;
            position: relative;
            margin: auto;
        }

        /* Caption text */
        .text {
            color: #f2f2f2;
            font-size: 15px;
            padding: 8px 12px;
            position: absolute;
            bottom: 8px;
            width: 100%;
            text-align: center;
        }

        /* Next & previous buttons */
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
        }

        /* Position the "next button" to the right */
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev {
            left: 0;
            border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover, .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* Number text (1/3 etc) */
        .numbertext {
            color: #f2f2f2;
            font-size: 12px;
            padding: 8px 12px;
            position: absolute;
            top: 0;
        }

        /* The dots/bullets/indicators */
        .dot {
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active {
            background-color: #717171;
        }

        /* Fading animation */
        .fade {
            -webkit-animation-name: fade;
            -webkit-animation-duration: 1.5s;
            animation-name: fade;
            animation-duration: 5s;
        }

        @-webkit-keyframes fade {
            from {
                opacity: .4
            }
            to {
                opacity: 1
            }
        }

        @keyframes fade {
            from {
                opacity: .4
            }
            to {
                opacity: 1
            }
        }

        /* On smaller screens, decrease text size */
        @media only screen and (max-width: 300px) {
            .text {
                font-size: 11px
            }
        }
    </style>


</head>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#inverseNavbar1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
            <a class="navbar-brand" href="/">

                <!--      	the site logo-->
                <img src="images/logo.png" alt="site logo" style="height:60px;width: 60px;visibility: inherit"/>

                <!--      	site name ( keep span )-->
                <span>Study</span>Con
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="inverseNavbar1">
            <!--     search form-->
            <form class="navbar-form navbar-right" role="search" id="popup" method="post" onsubmit="UserSearch()">
                <div class="form-group">
                    <input type="text" class="form-control" name="keyword" id="keyword" placeholder="Search here..." required>

                </div>
            </form>
            <!--      end search form-->

            <ul class="nav navbar-nav navbar-right text-uppercase">

                <!--       if you want to customize the navigation menu use the list bellow-->
                <div class="dropdown">
                    <li class="active"><a href="#heroarea">home</a></li>


                </div>

                <div class="dropdown">
                    <li><a href="#services">Consultancy</a></li>

                    <div class="dropdown-content">
                        <%
                        if(locals.Consultancy)
                        for(var i = 0; i < Consultancy.length; i++){ %>

                        <a href="#"><%= Consultancy[i].country_name %></a>

                        <% } %>
                    </div>
                </div>
                <div class="dropdown">
                    <li><a href="#blog">Languages</a></li>
                    <div class="dropdown-content">
                        <%
                        if(locals.Language)
                        for(var i = 0; i < Language.length; i++){ %>

                        <a href="#"><%= Language[i].Language_name %></a>

                        <% } %>
                    </div>
                </div>

                <div class="dropdown">
                    <li><a href="#works">Pilot Training</a></li>
                    <div class="dropdown-content">
                        <%
                        if(locals.PilotTraining)
                        for(var i = 0; i < PilotTraining.length; i++){ %>

                        <a href="#"><%= PilotTraining[i].PilotTraining_name %></a>

                        <% } %>
                    </div>
                </div>
                <div class="dropdown">
                    <li><a href="#portfolio">Call Center</a></li>
                    <div class="dropdown-content">
                        <%
                        if(locals.CallCenter)
                        for(var i = 0; i < CallCenter.length; i++){ %>

                        <a href="#"><%= CallCenter[i].CallCenter_name %></a>

                        <% } %>
                    </div>
                </div>
                <div class="dropdown">
                    <li><a href="#contact">contact</a></li>

                </div>
                <% if(locals.email) { %>
                <div class="dropdown">
                    <li><a href="/signin/logout">Logout</a></li>

                </div>

<%}else {%>
                <div class="dropdown">
                    <li><a href="/register">Register</a></li>

                </div>
                <div class="dropdown">
                    <li><a href="/signin">Sign In</a></li>

                </div>
         <%}%>       <!--        end menu list-->

            </ul>

        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
<div id="myserachResults"></div>
<script>
    function RegisterUser() {

        password = $('#password').val();
        cpasswrod = $('#cpassword').val();
        if (password === cpasswrod) {
            let email = $('#email').val();
            alert(email);
            $.ajax({
                type: 'POST',
                url: "http://localhost:3000/register/VerifyUser",
                data: {'email': email},
                dataType: 'json',
                success: (data) => {
                    if (data.length === 1) {
                        alert("username is already there");
                    }
                    else {

                        $.ajax({
                            type: 'POST',
                            url: "http://localhost:3000/register/Add_User",
                            data: {
                                name: $('#name').val(),
                                surname: $('#surname').val(),
                                email: $('#email').val(),
                                date_of_birth: $('#date_of_birth').val(),
                                address: $('#address').val(),
                                gender: $('#gender').val(),
                                nationality: $('#nationality').val(),
                                highest_degree: $('#highest_degree').val(),
                                intended_study_field: $('#intended_study_field').val(),
                                degree_sought: $('#degree_sought').val(),
                                password: $('#password').val(),
                            },
                            dataType: 'json',
                            success: (data) => {
                                alert("success");
                            }
                        });
                    }

                }
            });
        } else {

            alert("Confirm Password Doesn't Match !!!");
        }
    }


    function UserSearch() {
        keyword = $('#keyword').val();
        $.ajax({
            type: 'POST', url: "http://localhost:3000/search",
            data: {'keyword': keyword},
            dataType: 'json',
            success: (body) => {

                //  $('#myserachResults').html(urls);
                let i, html;
                html = '<ul>';
                for (i = 0; i < body.length; i++) {
                    html += "<li>" + body[i] + '</li>';
                }
                html += '<ul>';
                $("#SearchResult").html(html);
            }
        });
        /* $.ajax({
             type: 'GET',
             url: 'http://localhost:3000/search',
             // data: {"keyword": keyword},
             dataType: 'json',
         }).done(function (data) {
             alert("done" + data);
     /* data.forEach(function (data) {
          $(".messages").append("<li>" + data.Consultancy._id + "</li>");

      });


 });*/
        document.getElementById('abc').style.display = "block";
    }

    function saveContact() {

        let contactdata = {
            Name: $('#name').val(),
            Subject: $('#subject').val(),
            Email: $('#email').val(),
            Message: $('#message').val(),
            Date: Date.now()
        };

        $.ajax({
            type: 'POST',
            url: "http://localhost:3000/saveContact",
            data: {'contactdata': contactdata},
            dataType: 'json',
            success: () => {
                alert("Contacted Successfully ! Will Get You Back Soon... ");

                //  $("#contact").load(location.href + "http://localhost:3000/", "");
                $('#ContactDiv').load("http://localhost:3000/ #ContactDiv");
// $("#contact").load(location.href + " #contact");

            }
        });
        /*   $.ajax({
               type: 'POST',
               url: 'http://localhost:3000/saveContact',
               data: {"contactdata": contactdata},
               dataType: 'json',
               success: (data) => {
                   let i, html;
                   html = '<ul>';
                   for (i = 0; i < data.length; i++) {
                       html += "<li>" + data[i]._id  +'</li>';
                   }
                   html += '<ul>';
                   $("#SearchResult").html(html);
               }
           });
      */
    }

    function div_hide() {
        document.getElementById('abc').style.display = "none";
    }
</script>